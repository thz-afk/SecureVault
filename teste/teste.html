<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="Content-Security-Policy" content="default-src 'none'; script-src 'self' 'unsafe-inline' https://unpkg.com; style-src 'self' 'unsafe-inline'; img-src 'self' data:; font-src 'self';">
<title>SecureVault</title>
<script src="https://unpkg.com/kdbxweb@2.1.1/dist/kdbxweb.min.js"></script>

<style>
    :root {
        /* Paleta Resumida (Dark Moderno & Profissional) */
        --b1: #09090b; /* Fundo Principal */
        --b2: #18181b; /* Paineis/Cards */
        --b3: #27272a; /* Hover/Bordas */
        --txt: #e4e4e7; /* Texto Principal */
        --dim: #a1a1aa; /* Texto Secundário */
        --acc: #6366f1; /* Acentuação (Indigo) */
        --acc-h: #4f46e5; /* Hover Acentuação */
        --err: #ef4444;
        --suc: #22c55e;
        
        --rad: 12px; /* Bordas arredondadas */
        --shd: 0 10px 30px -10px rgba(0,0,0,0.6);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
    
    body { 
        background-color: var(--b1); 
        background-image: radial-gradient(circle at top right, #1e1b4b, transparent 40%), radial-gradient(circle at bottom left, #1e1b4b, transparent 40%);
        color: var(--txt); 
        min-height: 100vh; 
        overflow-x: hidden;
    }

    /* Ícones SVG */
    .icon { width: 18px; height: 18px; fill: none; stroke: currentColor; stroke-width: 2; stroke-linecap: round; stroke-linejoin: round; }
    .icon-lg { width: 24px; height: 24px; }

    /* --- Auth Screen (Login) --- */
    .auth-wrap {
        display: flex; align-items: center; justify-content: center; min-height: 100vh; padding: 20px;
    }
    .auth-box {
        background: rgba(24, 24, 27, 0.9); backdrop-filter: blur(12px);
        border: 1px solid var(--b3); border-radius: 24px;
        padding: 48px; width: 100%; max-width: 420px;
        box-shadow: var(--shd); text-align: center;
    }
    .logo-lg {
        font-size: 32px; font-weight: 800; margin-bottom: 8px;
        background: linear-gradient(135deg, #fff 0%, var(--acc) 100%);
        -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    }

    /* --- Dashboard Layout --- */
    .dash { display: none; height: 100vh; flex-direction: column; }
    .head {
        height: 64px; background: var(--b2); border-bottom: 1px solid var(--b3);
        display: flex; align-items: center; justify-content: space-between; padding: 0 24px;
    }
    .main { display: flex; flex: 1; overflow: hidden; }
    
    /* Sidebar */
    .side {
        width: 260px; background: var(--b1); border-right: 1px solid var(--b3);
        padding: 20px; display: flex; flex-direction: column; gap: 4px;
    }
    .nav-item {
        padding: 10px 14px; border-radius: var(--rad); cursor: pointer;
        color: var(--dim); font-size: 14px; font-weight: 500; transition: 0.2s;
        display: flex; align-items: center; gap: 12px;
    }
    .nav-item:hover { background: var(--b3); color: var(--txt); }
    .nav-item.active { background: var(--acc); color: white; }
    .nav-item.active .icon { stroke: white; }
    
    /* Content */
    .content { flex: 1; padding: 32px; overflow-y: auto; }
    .sect { display: none; animation: fade In 0.3s; }
    .sect.active { display: block; }
    @keyframes fadeIn { from { opacity:0; transform:translateY(5px);} to { opacity:1; transform:translateY(0);} }

    .sect-head { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
    h2 { font-size: 24px; font-weight: 600; }

    /* --- Components --- */
    .inp-grp { margin-bottom: 16px; text-align: left; }
    .inp-grp label { display: block; font-size: 12px; color: var(--dim); margin-bottom: 6px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }
    
    .inp {
        width: 100%; padding: 12px 16px; background: var(--b1); border: 1px solid var(--b3);
        border-radius: var(--rad); color: var(--txt); font-size: 15px; transition: 0.2s; outline: none;
    }
    .inp:focus { border-color: var(--acc); box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.2); }
    
    .btn {
        border: none; padding: 12px 20px; border-radius: var(--rad); cursor: pointer;
        font-weight: 600; font-size: 14px; transition: 0.2s; display: inline-flex; align-items: center; gap: 8px; justify-content: center;
    }
    .btn-p { background: var(--acc); color: white; }
    .btn-p:hover { background: var(--acc-h); transform: translateY(-1px); }
    
    .btn-s { background: transparent; border: 1px solid var(--b3); color: var(--dim); }
    .btn-s:hover { border-color: var(--dim); color: var(--txt); background: var(--b3); }

    .card { background: var(--b2); border: 1px solid var(--b3); border-radius: var(--rad); padding: 20px; margin-bottom: 16px; }

    /* --- Modals --- */
    .modal {
        display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.7); backdrop-filter: blur(4px);
        z-index: 999; align-items: center; justify-content: center; padding: 20px;
    }
    .modal.show { display: flex; }
    .md-box {
        background: var(--b2); border: 1px solid var(--b3); border-radius: 16px;
        padding: 24px; width: 100%; max-width: 480px; box-shadow: var(--shd);
        max-height: 85vh; overflow-y: auto;
    }
    .md-head { display: flex; justify-content: space-between; margin-bottom: 20px; align-items: center; }
    .close { background: none; border: none; color: var(--dim); font-size: 20px; cursor: pointer; transition: color 0.2s;}
    .close:hover { color: var(--txt); }
    
    /* Security Badge Logic */
    .sec-feat { display: flex; gap: 16px; margin-bottom: 16px; align-items: flex-start; }
    .sec-icon-box { 
        min-width: 40px; height: 40px; background: rgba(34, 197, 94, 0.1); 
        border-radius: 8px; display: flex; align-items: center; justify-content: center; color: var(--suc);
    }
    .sec-txt strong { color: var(--txt); display: block; margin-bottom: 4px; font-size: 15px; }
    .sec-txt p { color: var(--dim); font-size: 13px; line-height: 1.5; margin: 0; }

</style>
</head>
<body>

<!-- 1. Auth Screen -->
<div class="auth-wrap" id="authScreen">
    <div class="auth-box">
        <div class="logo-lg">SecureVault</div>
        <p style="color:var(--dim); margin-bottom:32px; font-size:14px;">Sua fortaleza digital pessoal</p>
        
        <form id="authForm">
            <div class="inp-grp">
                <label>Senha Mestre</label>
                <input type="password" class="inp" id="masterPwd" placeholder="••••••••" required>
            </div>
            
            <div class="inp-grp" id="confirmGroup" style="display:none">
                <label>Confirmar Senha</label>
                <input type="password" class="inp" id="confirmPwd" placeholder="Repita a senha">
            </div>

            <button type="submit" class="btn btn-p" style="width:100%; margin-bottom: 16px;" id="authBtn">
                Entrar no Cofre
            </button>

            <button type="button" class="btn btn-s" style="width:100%; font-size:13px; gap:8px;" id="aboutBtn">
                <svg class="icon" viewBox="0 0 24 24"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
                Segurança e Privacidade
            </button>
        </form>
    </div>
</div>

<!-- 2. Dashboard -->
<div class="dash" id="dashboard">
    <header class="head">
        <div style="font-weight:700; font-size:18px; color:var(--txt); letter-spacing:-0.5px">SecureVault</div>
        <div style="display:flex; gap:10px; align-items:center">
            <span id="timerDisplay" style="font-family:monospace; color:var(--dim); font-size:13px">--:--</span>
            <button class="btn btn-s" style="padding:8px; font-size:12px" id="extendSessionBtn" title="Estender Sessão">
                <svg class="icon" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
            </button>
            <button class="btn btn-s" style="padding:8px" id="configBtn" title="Configurações">
                <svg class="icon" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
            </button>
            <button class="btn btn-s" style="padding:8px 12px; color:var(--err); border-color:rgba(239,68,68,0.3); font-size:12px" id="logoutBtn">Sair</button>
        </div>
    </header>

    <div class="main">
        <aside class="side">
            <div class="nav-item active" data-section="passwords">
                <svg class="icon" viewBox="0 0 24 24"><path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"></path></svg>
                Senhas
            </div>
            <div class="nav-item" data-section="generator">
                <svg class="icon" viewBox="0 0 24 24"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg>
                Gerador
            </div>
            <div class="nav-item" data-section="notes">
                <svg class="icon" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
                Notas
            </div>
            
            <div style="height:1px; background:var(--b3); margin:10px 0;"></div>
            <div style="font-size:11px; color:var(--dim); padding:0 10px; text-transform:uppercase; font-weight:700">Blocos</div>
            <div id="blkList" style="flex:1; overflow-y:auto; margin-top:8px"></div>
            <button class="btn btn-s" id="addBlkBtn" style="width:100%; margin-top:10px; font-size:12px">
                <svg class="icon" style="width:14px; height:14px" viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg> Novo Bloco
            </button>
        </aside>

        <main class="content">
            <!-- Passwords -->
            <section class="sect active" id="passwords">
                <div class="sect-head">
                    <h2>Minhas Senhas</h2>
                    <div style="display:flex; gap:8px">
                        <button class="btn btn-s" id="openDbModalBtn">
                            <svg class="icon" style="width:16px" viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
                            Backup & Dados
                        </button>
                        <button class="btn btn-p" id="addPwdBtn">
                            <svg class="icon" style="width:16px" viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg> Nova
                        </button>
                    </div>
                </div>
                <div id="pwdList"></div>
            </section>

            <!-- Generator -->
            <section class="sect" id="generator">
                <div class="sect-head"><h2>Gerador Seguro</h2></div>
                <div class="card">
                    <div class="inp-grp">
                        <label>Resultado</label>
                        <div style="display:flex; gap:8px">
                            <input type="text" class="inp" id="genPwd" readonly style="font-family:monospace; letter-spacing:1px">
                            <button class="btn btn-p" id="copyGenBtn">Copiar</button>
                        </div>
                    </div>
                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:20px; margin-top:20px;">
                        <div class="inp-grp">
                            <label>Tamanho</label>
                            <input type="number" class="inp" id="genLen" value="20" min="8" max="128">
                        </div>
                        <div style="display:flex; flex-direction:column; gap:8px; justify-content:center">
                            <label style="display:flex; gap:8px; align-items:center; color:var(--txt); cursor:pointer"><input type="checkbox" id="genUpper" checked> Maiúsculas (A-Z)</label>
                            <label style="display:flex; gap:8px; align-items:center; color:var(--txt); cursor:pointer"><input type="checkbox" id="genNum" checked> Números (0-9)</label>
                            <label style="display:flex; gap:8px; align-items:center; color:var(--txt); cursor:pointer"><input type="checkbox" id="genSym" checked> Símbolos (!@#)</label>
                        </div>
                    </div>
                    <button class="btn btn-s" style="width:100%; margin-top:10px" id="genPwdBtn">Regerar Senha</button>
                </div>
            </section>

            <!-- Notes -->
            <section class="sect" id="notes">
                <div class="sect-head">
                    <h2>Notas Seguras</h2>
                    <button class="btn btn-p" id="addNoteBtn">
                        <svg class="icon" style="width:16px" viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg> Nova Nota
                    </button>
                </div>
                <div id="notesList"></div>
            </section>
        </main>
    </div>
</div>

<!-- --- MODALS --- -->

<!-- About/Security Modal -->
<div class="modal" id="aboutModal">
    <div class="md-box">
        <div class="md-head">
            <h3 style="font-size:18px">Segurança Transparente</h3>
            <button class="close" data-modal="aboutModal"><svg class="icon" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>
        </div>
        
        <div class="sec-feat">
            <div class="sec-icon-box">
                <svg class="icon" viewBox="0 0 24 24"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
            </div>
            <div class="sec-txt">
                <strong>Criptografia Local (Client-Side)</strong>
                <p>Tudo é criptografado no seu navegador antes de ser salvo. A senha mestre nunca sai do seu dispositivo.</p>
            </div>
        </div>

        <div class="sec-feat">
            <div class="sec-icon-box">
                <svg class="icon" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"></circle><line x1="4.93" y1="4.93" x2="19.07" y2="19.07"></line></svg>
            </div>
            <div class="sec-txt">
                <strong>Zero Conhecimento</strong>
                <p>Nós não temos acesso aos seus dados. Se você perder sua senha mestre, ninguém (nem nós) poderá recuperar seus dados.</p>
            </div>
        </div>

        <div class="sec-feat">
            <div class="sec-icon-box">
                <svg class="icon" viewBox="0 0 24 24"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>
            </div>
            <div class="sec-txt">
                <strong>Armazenamento Offline</strong>
                <p>Os dados ficam salvos no LocalStorage do seu navegador ou em arquivos físicos (.kdbx) que você controla.</p>
            </div>
        </div>

        <div style="margin-top:20px; padding:12px; background:rgba(239,68,68,0.1); border:1px solid rgba(239,68,68,0.3); border-radius:8px; font-size:13px; color:#fca5a5; display:flex; gap:10px;">
            <svg class="icon" style="min-width:18px; color:var(--err)" viewBox="0 0 24 24"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
            <span><strong>Importante:</strong> Não esqueça sua senha mestre. Não há botão de "Esqueci minha senha" porque isso quebraria a segurança.</span>
        </div>
    </div>
</div>

<!-- DB/Backup Modal -->
<div class="modal" id="dbModal">
    <div class="md-box">
        <div class="md-head"><h3>Gerenciar Dados</h3><button class="close" data-modal="dbModal"><svg class="icon" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div>
        
        <div style="padding-bottom:20px; border-bottom:1px solid var(--b3); margin-bottom:20px">
            <label style="color:var(--acc); font-weight:bold; display:block; margin-bottom:10px">Exportar (Backup)</label>
            <select class="inp" id="exportFormat" style="margin-bottom:10px">
                <option value="kdbx">KeePass Encripitado (.kdbx)</option>
                <option value="json_enc">JSON Encripitado</option>
                <option value="csv">CSV (Texto Plano - Cuidado!)</option>
            </select>
            <input type="password" class="inp" id="exportFilePwd" placeholder="Senha para o arquivo" style="margin-bottom:10px">
            <button class="btn btn-p" id="btnExportAction" style="width:100%">Baixar Arquivo</button>
        </div>

        <div>
            <label style="color:var(--acc); font-weight:bold; display:block; margin-bottom:10px">Importar</label>
            <input type="file" id="importFile" class="inp" style="margin-bottom:10px">
            <button class="btn btn-s" id="btnImportAction" style="width:100%">Carregar Backup</button>
        </div>
    </div>
</div>

<!-- Outros modais essenciais -->
<div class="modal" id="pwdModal"><div class="md-box"><div class="md-head"><h3>Senha</h3><button class="close" data-modal="pwdModal"><svg class="icon" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div><form id="pwdForm"><div class="inp-grp"><label>Bloco</label><select id="pwdBlk" class="inp"></select></div><div class="inp-grp"><label>Site</label><input id="pwdSite" class="inp" required></div><div class="inp-grp"><label>Login</label><input id="pwdUsr" class="inp"></div><div class="inp-grp"><label>Senha</label><div style="display:flex;gap:8px"><input id="pwdVal" class="inp"><button type="button" class="btn btn-s" id="genQuickPwdBtn">Gerar</button></div></div><button type="submit" class="btn btn-p" style="width:100%">Salvar</button></form></div></div>
<div class="modal" id="blkModal"><div class="md-box"><div class="md-head"><h3>Novo Bloco</h3><button class="close" data-modal="blkModal"><svg class="icon" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div><form id="blkForm"><div class="inp-grp"><label>Nome</label><input id="blkName" class="inp" required></div><button type="submit" class="btn btn-p" style="width:100%">Criar</button></form></div></div>
<div class="modal" id="noteModal"><div class="md-box"><div class="md-head"><h3>Nota</h3><button class="close" data-modal="noteModal"><svg class="icon" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div><form id="noteForm"><div class="inp-grp"><label>Bloco</label><select id="noteBlk" class="inp"></select></div><div class="inp-grp"><label>Título</label><input id="noteTitle" class="inp" required></div><div class="inp-grp"><label>Conteúdo</label><textarea id="noteContent" class="inp" style="height:120px"></textarea></div><button type="submit" class="btn btn-p" style="width:100%">Salvar</button></form></div></div>
<div class="modal" id="authModal"><div class="md-box"><div class="md-head"><h3>Confirmar Acesso</h3><button class="close" data-modal="authModal"><svg class="icon" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div><form id="reauthForm"><input type="password" id="authPwd" class="inp" placeholder="Senha Mestre" style="margin-bottom:10px"><button class="btn btn-p" style="width:100%">Confirmar</button></form></div></div>
<div class="modal" id="configModal"><div class="md-box"><div class="md-head"><h3>Configurações</h3><button class="close" data-modal="configModal"><svg class="icon" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div><button class="btn btn-p" id="saveConfigBtn">Salvar</button></div></div>

<!-- Toast -->
<div id="toast" style="position:fixed; bottom:20px; left:50%; transform:translate(-50%, 100px); background:var(--b2); border:1px solid var(--acc); padding:12px 24px; border-radius:50px; box-shadow:var(--shd); transition:0.3s; opacity:0; z-index:2000; font-size:14px; font-weight:500">
    <span id="toastMsg"></span>
</div>

<!-- Scripts -->
<script src="js/security.js"></script>
<script src="js/crypto.js"></script>
<script src="js/vaultStore.js"></script>
<script src="js/data/streets.js"></script>
<script src="js/data/pentestPayloads.js"></script>
<script src="js/app.js"></script>
<script src="js/main.js"></script>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // Helper para Modais
    const openModal = (id) => {
        const m = document.getElementById(id);
        if(m) { m.classList.add('show'); m.style.display = 'flex'; }
    };
    const closeModal = (m) => {
        m.classList.remove('show');
        setTimeout(() => m.style.display = 'none', 200);
    };

    // Setup dos botões de fechar e clicar fora
    document.querySelectorAll('.close').forEach(btn => {
        btn.onclick = () => closeModal(document.getElementById(btn.dataset.modal));
    });
    window.onclick = (e) => {
        if(e.target.classList.contains('modal')) closeModal(e.target);
    };

    // Lógica dos Botões Principais
    const aboutBtn = document.getElementById('aboutBtn');
    if(aboutBtn) aboutBtn.onclick = () => openModal('aboutModal');

    const dbBtn = document.getElementById('openDbModalBtn');
    if(dbBtn) dbBtn.onclick = () => openModal('dbModal');
    
    const configBtn = document.getElementById('configBtn');
    if(configBtn) configBtn.onclick = () => openModal('configModal');

    // Export Logic UI
    const exportFmt = document.getElementById('exportFormat');
    const exportPwd = document.getElementById('exportFilePwd');
    if(exportFmt && exportPwd) {
        exportFmt.onchange = () => {
            exportPwd.style.display = (exportFmt.value.includes('csv') || exportFmt.value === 'json') ? 'none' : 'block';
        };
    }
});
</script>

</body>
</html>
