<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Content-Security-Policy" content="default-src 'none'; script-src 'self'; style-src 'self'; img-src 'none'; connect-src 'none'; font-src 'self'; object-src 'none'; media-src 'none'; frame-src 'none'; frame-ancestors 'none'; base-uri 'none'; form-action 'none';">
<title>SecureVault</title>
<link rel="stylesheet" href="styles/main.css">
</head>
<body>

<!-- Auth Screen -->
<div class="auth-container" id="authScreen">
    <div class="auth-box">
        <h1>SecureVault</h1>
        <p id="authMsg">Digite sua senha mestre para acessar</p>
        <form id="authForm">
            <div class="form-group">
                <label>Senha Mestre</label>
                <input type="password" class="input" id="masterPwd" required minlength="8" maxlength="128" autocomplete="off">
            </div>
            <div class="form-group" id="confirmGroup" style="display:none">
                <label>Confirmar Senha</label>
                <input type="password" class="input" id="confirmPwd" minlength="8" maxlength="128" autocomplete="off">
            </div>
            <div class="form-group">
                <div class="checkbox-group">
                    <input type="checkbox" id="extendSession">
                    <label for="extendSession" style="margin:0;font-size:14px;color:var(--txt-sec)">Manter sessão por 30 minutos</label>
                </div>
            </div>
            <button type="submit" class="btn btn-primary" id="authBtn" style="width:100%">
                <span id="authBtnTxt">Entrar</span>
            </button>
        </form>
    </div>
</div>

<!-- Dashboard -->
<div class="dashboard" id="dashboard">
    <header class="header">
        <div class="logo">SecureVault</div>
        <div class="header-actions">
            <div class="session-timer" id="sessionTimer" style="display:flex;align-items:center;gap:12px;margin-right:12px">
                <span id="timerDisplay" style="font-size:14px;color:var(--txt-sec)">--:--</span>
                <button class="btn btn-small" id="extendSessionBtn" title="Prolongar sessão em 30 minutos">+30min</button>
            </div>
            <button class="btn-icon" id="configBtn" title="Configurações">Configurações</button>
            <button class="btn btn-danger" id="logoutBtn">Sair</button>
        </div>
    </header>
    
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="menu-item active" data-section="passwords">
                <span class="menu-icon">▶</span> Senhas
            </div>
            <div class="menu-item" data-section="generator">
                <span class="menu-icon">▶</span> Gerador
            </div>
            <div class="menu-item" data-section="persons">
                <span class="menu-icon">▶</span> Pessoas
            </div>
            <div class="menu-item" data-section="notes">
                <span class="menu-icon">▶</span> Salvar Coisas
            </div>
            
            <div class="blk-list">
                <div class="blk-list-header">
                    <span style="font-size:14px;color:var(--txt-sec)">Blocos</span>
                    <button class="btn-icon" id="addBlkBtn">+</button>
                </div>
                <div id="blkList"></div>
            </div>
        </aside>
        
        <!-- Content Area -->
        <main class="content">
            <!-- Passwords Section -->
            <section class="section active" id="passwords">
                <div class="section-header">
                    <h2 class="section-title">Senhas</h2>
                    <button class="btn btn-primary" id="addPwdBtn">+ Nova Senha</button>
                </div>
                <div id="pwdList"></div>
            </section>
            
            <!-- Generator Section -->
            <section class="section" id="generator">
                <div class="section-header">
                    <h2 class="section-title">Gerador de Senhas</h2>
                </div>
                <div class="card">
                    <div class="form-group">
                        <label>Senha Gerada</label>
                        <div style="display:flex;gap:12px">
                            <input type="text" class="input" id="genPwd" readonly>
                            <button class="btn btn-secondary" id="copyGenBtn">Copiar</button>
                        </div>
                    </div>
                    <div class="pwd-gen-opts">
                        <div class="form-group">
                            <label>Tamanho</label>
                            <input type="number" class="input" id="genLen" value="16" min="4" max="128">
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="genUpper" checked>
                            <label for="genUpper">Maiúsculas</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="genLower" checked>
                            <label for="genLower">Minúsculas</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="genNum" checked>
                            <label for="genNum">Números</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="genSym" checked>
                            <label for="genSym">Símbolos</label>
                        </div>
                    </div>
                    <button class="btn btn-primary" id="genPwdBtn">Gerar Nova Senha</button>
                </div>
            </section>
            
            <!-- Persons Section -->
            <section class="section" id="persons">
                <div class="section-header">
                    <h2 class="section-title">Gerador de Pessoas</h2>
                    <div>
                        <button class="btn btn-primary" id="genPersonBtn">Gerar Pessoa</button>
                        <button class="btn btn-secondary" id="showSavedPersonsBtn">Ver Salvos</button>
                    </div>
                </div>
                <div id="personContent"></div>
            </section>
            
            <!-- Notes Section -->
            <section class="section" id="notes">
                <div class="section-header">
                    <h2 class="section-title">Salvar Coisas</h2>
                    <button class="btn btn-primary" id="addNoteBtn">+ Nova Anotação</button>
                </div>
                <div id="notesList"></div>
            </section>
        </main>
    </div>
</div>

<!-- Modals -->
<!-- Auth Modal for Re-authentication -->
<div class="modal" id="authModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">Autenticação Necessária</h3>
            <button class="btn-icon modal-close" data-modal="authModal">✕</button>
        </div>
        <p style="margin-bottom:16px;color:var(--txt-sec)">Digite sua senha mestre para acessar as senhas</p>
        <form id="reauthForm">
            <div class="form-group">
                <label>Senha Mestre</label>
                <input type="password" class="input" id="authPwd" required autocomplete="off">
            </div>
            <button type="submit" class="btn btn-primary">Confirmar</button>
        </form>
    </div>
</div>

<!-- Block Modal -->
<div class="modal" id="blkModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">Novo Bloco</h3>
            <button class="btn-icon modal-close" data-modal="blkModal">✕</button>
        </div>
        <form id="blkForm">
            <div class="form-group">
                <label>Nome do Bloco</label>
                <input type="text" class="input" id="blkName" required maxlength="50">
            </div>
            <button type="submit" class="btn btn-primary">Salvar</button>
        </form>
    </div>
</div>

<!-- Password Modal -->
<div class="modal" id="pwdModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">Nova Senha</h3>
            <button class="btn-icon modal-close" data-modal="pwdModal">✕</button>
        </div>
        <form id="pwdForm">
            <div class="form-group">
                <label>Bloco</label>
                <select class="select" id="pwdBlk" required></select>
            </div>
            <div class="form-group">
                <label>Site/App</label>
                <input type="text" class="input" id="pwdSite" required maxlength="100">
            </div>
            <div class="form-group">
                <label>Email/Usuário</label>
                <input type="text" class="input" id="pwdUsr" required maxlength="200">
            </div>
            <div class="form-group">
                <label>Senha</label>
                <div style="display:flex;gap:12px">
                    <input type="text" class="input" id="pwdVal" required maxlength="500">
                    <button type="button" class="btn btn-secondary" id="genQuickPwdBtn">Gerar</button>
                </div>
            </div>
            <button type="submit" class="btn btn-primary">Salvar</button>
        </form>
    </div>
</div>

<!-- Note Modal -->
<div class="modal" id="noteModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">Nova Anotação</h3>
            <button class="btn-icon modal-close" data-modal="noteModal">✕</button>
        </div>
        <form id="noteForm">
            <div class="form-group">
                <label>Bloco</label>
                <select class="select" id="noteBlk" required></select>
            </div>
            <div class="form-group">
                <label>Título</label>
                <input type="text" class="input" id="noteTitle" required maxlength="100">
            </div>
            <div class="form-group">
                <label>Conteúdo</label>
                <textarea class="textarea" id="noteContent" required maxlength="5000"></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Salvar</button>
        </form>
    </div>
</div>

<!-- Config Modal -->
<div class="modal" id="configModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">Configurações</h3>
            <button class="btn-icon modal-close" data-modal="configModal">✕</button>
        </div>
        <div class="config-section">
            <div class="config-title">Serviço de Email Temporário</div>
            <div class="radio-group">
                <label>
                    <input type="radio" name="emailSvc" value="tuamae" checked>
                    TuaMaeAquelaUrsa
                </label>
                <label>
                    <input type="radio" name="emailSvc" value="firemail">
                    Firemail
                </label>
            </div>
        </div>
        <button class="btn btn-primary" id="saveConfigBtn">Salvar Configurações</button>
    </div>
</div>

<!-- Toast Container -->
<div class="toast" id="toast">
    <span id="toastMsg"></span>
</div>

<script src="js/security.js"></script>
<script src="js/crypto.js"></script>
<script src="js/vaultStore.js"></script>
<script src="js/data/streets.js"></script>
<script src="js/data/pentestPayloads.js"></script>
<script src="js/app.js"></script>
<script src="js/main.js"></script>

</body>
</html>
